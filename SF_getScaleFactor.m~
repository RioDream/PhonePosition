function SF_getScaleFactor()

close all;
infoDir = './data/2/';
t2f_filePath = [infoDir, 'img2time.txt'];

%% 1. 得到在world中的translates

%1.1 load IMU 数据
[timestamps, linaccs] = Utils_loadIMUdata(infoDir);
[timestamps, linaccs ] = SF_getNeatTimeSensorInfoByInterpolation(linaccs, timestamps);

%1.2 进行积分和滤波， 得到比较 position 信息
linPosHP = SF_getLinPosHP(linaccs);

%1.3 得到比较好的波峰和波谷对
IndexPairs = SF_getGoodIndexPairs(linPosHP(:,3));

%1.4 得到
translates_in_world = [];
nof_pairs = size(IndexPairs, 1);
for i=1:nof_pairs
    maxIdx = IndexPairs(i, 1);
    minIdx = IndexPairs(i, 2);
    
    maxPos = linPosHP(maxIdx,:);
    minPos = linPosHP(minIdx,:);
    
    translate = norm(maxPos - minPos);
    translates_in_world = [translates_in_world , translate];
end

%% 2. 得到在点云坐标系中的 translates

%1.4 得到 timestamp和frameIdx 之间的对应信息
t2fs = Utils_loadTimestamp2Frameidx(t2f_filePath);

translates_in_G = [];

TimestampPairs = SF_getTimestampPairsFromIndexPairs(timestamps, IndexPairs);
nof_pairs = size(TimestampPairs,1);
for i=1:nof_pairs
    timestampPair = TimestampPairs(i, :);
    
    maxTimestamp = timestampPair(1);
    minTimestamp = timestampPair(2);
    
    maxFrameIdx = T2F_findClosestFrameIdx(t2fs, maxTimestamp);
    minFrameIdx = T2F_findClosestFrameIdx(t2fs, minTimestamp);
    
    [R1, T1] = Utils_loadFramePoseByIdx(infoDir, maxFrameIdx);
    [R2, T2] = Utils_loadFramePoseByIdx(infoDir, minFrameIdx);
    
    translate_in_G = SF_calcTranslateByRanT(R1, T1, R2, T2);
    
    translates_in_G = [translates_in_G, translate_in_G];
end

%% 3. 得到 scales
scales = translates_in_world./translates_in_G;
scale = median(scales);


end